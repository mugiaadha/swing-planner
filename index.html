<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Trader Plan Generator â€” DCA / Cicil Multi-Saham</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h1>Trader Plan Generator (HTML/CSS/JS)</h1>

      <div class="card">
        <div class="row">
          <div class="col">
            <label>Total modal (Rp)</label>
            <input id="inputModal" type="number" value="60000000" />
          </div>
          <div class="col">
            <label>Lot size (lembar per lot)</label>
            <input id="inputLotSize" type="number" value="100" />
          </div>
          <div class="col">
            <label>Durasi (hari)</label>
            <input id="inputDays" type="number" value="90" />
          </div>
          <div class="col">
            <label>Jumlah tahap</label>
            <input id="inputStages" type="number" value="3" min="1" />
          </div>
        </div>

        <div
          style="display: flex; gap: 12px; align-items: center; margin-top: 8px"
        >
          <div style="flex: 1">
            <label>Alokasi tahap (pilih)</label>
            <select id="allocMode">
              <option value="equal">
                Equal per tahap (sisa dibagi sama rata)
              </option>
              <option value="custom">Custom persen per tahap</option>
            </select>
          </div>
          <div id="customAllocWrap" style="flex: 2; display: none">
            <label
              >Masukkan persen tiap tahap (pisahkan pakai koma). Contoh (3
              tahap): 20,30,50</label
            >
            <input id="customAlloc" type="text" placeholder="misal: 20,30,50" />
          </div>
          <div style="width: 220px">
            <label>Stage0 (fix) per saham (lot)</label>
            <input id="stage0_lot" type="number" value="1" min="0" />
          </div>
          <div style="width: 220px">
            <label>Simpan plan di browser selama...</label>
            <select id="saveDays">
              <option value="0" selected>Jangan simpan</option>
              <option value="1">1 hari</option>
              <option value="3">3 hari</option>
              <option value="7">7 hari</option>
              <option value="30">30 hari</option>
            </select>
          </div>
        </div>
        <p class="small">
          Tahap 0 = pembelian awal (fix lots per saham). Tahap 1..N =
          cicilan/entry selanjutnya. Jika gunakan custom allocation, jumlah
          persentase harus = 100.
        </p>
      </div>

      <div class="card">
        <div
          style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;"
        >
          <div>
            <strong>Daftar Saham</strong>
            <div class="small muted">Tambah, edit harga, dan bobot jika perlu.</div>
          </div>
          <div class="flex">
            <button class="btn" id="btnAddStock">+ Tambah Saham</button>
            <button id="btnReset" class="danger">Reset</button>
          </div>
        </div>
        <table style="width:100%;margin-bottom:8px"><thead><tr>
          <th>Kode</th>
          <th>Harga Awal</th>
          <th>Harga per Stage</th>
          <th>Bobot %</th>
          <th>Aksi</th>
        </tr></thead>
        <tbody id="stocksList"></tbody>
      </table>
      <template id="stockTemplate">
        <tr class="stock-row">
          <td><input class="s-name" type="text" placeholder="Kode (mis: CDIA)" value="CDIA" /></td>
          <td><input class="s-price" type="number" placeholder="Harga awal" value="1575" /></td>
          <td>
            <span class="stage-prices">
              <!-- Harga per stage akan diisi oleh JS, label contoh: -->
              <!-- <span class='stage-label'>Stage 1:</span> <span class='stage-price'>1000</span> -->
            </span>
          </td>
          <td><input class="s-weight" type="number" placeholder="Bobot %" value="0" /></td>
          <td><button class="btn remove">Hapus</button></td>
        </tr>
      </template>
    </div>
    

    <div class="card" style="margin-top:24px">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <strong>Hasil Rencana Trader</strong>
          <div class="small muted">Hitung berdasarkan input di atas.</div>
        </div>
        <div class="flex">
          <button class="btn" id="btnCompute">Generate Plan</button>
          <button id="btnExport" class="success">Export CSV</button>
        </div>
      </div>

      <div id="resultWrap" style="margin-top: 12px"></div>
      
      <div class="small">
          Tip: mulai dengan stage0 kecil (1 lot) untuk test, gunakan
          buy-on-weakness di tahap berikutnya jika harga turun.
      </div>
    </div>


    <script src="main.js"></script>
  </body>
</html>
